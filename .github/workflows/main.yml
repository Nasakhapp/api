name: Node.js CI

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
      - name: Create .env file
        uses: ozaytsev86/create-env-file@v1
        with:
          ENV_DATABASE_URL: ${{ secrets.DATABASE_URL }}
          ENV_TOKEN_SECRET: ${{ secrets.TOKEN_SECRET }}
      - name: Send to server
        uses: garygrossgarten/github-action-scp@release
        with:
          local: .
          remote: /root/nasakh-api/
          host: ${{ secrets.SERVER_IP }}
          username: ${{ secrets.SERVER_USER }}
          password: ${{ secrets.SERVER_PASS }}
        
